<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="JEDao">

	<select id="JEProductTotal" resultType="int">
		SELECT count(*) FROM product
	</select>
	
	<select id="JEProductListAll" parameterType="Product" resultType="Product">
		SELECT *
		FROM (
        		SELECT rownum rn, a.*
        		FROM (SELECT * FROM product ORDER BY pno) a
     		 )
		WHERE rn BETWEEN #{start} AND #{end}
	</select>
	
	<select id="JEProductSelOne" parameterType="int" resultType="Product">
		SELECT * FROM product WHERE pno = #{pno}
	</select>
	
	<update id="JEproductUpdate" parameterType="Product">
		UPDATE product SET title=#{title}, category=#{category}, genre=#{genre}, 
						   year=#{year}, country=#{country}, 
						   director=#{director}, casting=#{casting}, price=#{price},
						   description=#{description}, p_img=#{p_img}, p_video{p_video}
		WHERE pno=#{pno}
	</update>
	
	<select id="JESelectManager" resultType="Product">
	
	</select>
	
	<select id="insertProduct" parameterType="Product">
		INSERT INTO product
		VALUES(#{pno}, #{title}, #{category}, #{genre}, #{year}, #{country}, #{director}, #{casting}, #{description}, #{price}, #{p_img}, #{p_video})
	</select>
	
	<delete id="deleteProduct" parameterType="int">
		DELETE FROM product
		WHERE pno=#{pno}
	</delete>
	
	<!-- 상품 정보 -->
	<select id="getProductsInfo" resultType="Product">
		SELECT product.pno, product.title, product.category, product.genre, product.year, product.director, product.casting, product.p_img
		FROM product LEFT OUTER JOIN category ON product.category = category.category
		WHERE pno = ${pno}
	</select>
	
</mapper>

